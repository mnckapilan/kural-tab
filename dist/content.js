document.getElementById("mode-switch").addEventListener("change",(function(){const e=document.body.classList.toggle("light-mode");document.body.classList.toggle("dark-mode"),chrome&&chrome.storage&&chrome.storage.sync&&chrome.storage.sync.set({theme:e?"light":"dark"}).catch((e=>{console.error("Error saving theme:",e)}))})),document.addEventListener("DOMContentLoaded",(function(){document.body.classList.add("no-transition"),chrome&&chrome.storage&&chrome.storage.sync?chrome.storage.sync.get("theme").then((e=>{"light"===e.theme?(document.body.classList.add("light-mode"),document.body.classList.remove("dark-mode"),document.getElementById("mode-switch").checked=!0):(document.body.classList.add("dark-mode"),document.body.classList.remove("light-mode"),document.getElementById("mode-switch").checked=!1),document.body.offsetWidth,document.body.classList.remove("no-transition")})).catch((e=>{console.error("Error getting theme:",e),document.body.classList.remove("no-transition")})):(document.body.classList.add("dark-mode"),document.body.classList.remove("light-mode"),document.getElementById("mode-switch").checked=!1,document.body.offsetWidth,document.body.classList.remove("no-transition"))})),async function(){const e=document.getElementById("kural"),t=document.getElementById("explanation"),n=document.getElementById("mv"),o=document.getElementById("number"),a=document.getElementById("metadata");try{const[d,r]=await Promise.all([fetch("data/thirukkural.json"),fetch("data/metadata.json")]),s=await d.json(),c=await r.json(),i=s.kural.length,m=Math.floor(Math.random()*i),l=s.kural[m];e.innerHTML=`<div>${l.Line1}</div><div>${l.Line2}</div>`,t.innerHTML=l.explanation,n.innerHTML=l.mv;const h=function(e,t){for(const n of e.section.detail)for(const e of n.chapterGroup.detail)for(const o of e.chapters.detail)if(t>=o.start&&t<=o.end)return{section:{name:n.translation,tamil:n.name},chapter:{name:o.translation,tamil:o.name,number:o.number}};return null}(c[0],l.Number);o.innerHTML=`${l.Number}`,a.innerHTML=`\n      <a href="https://thirukkural.gokulnath.com/#/thirukkuralchapters/${h.chapter.number}/thirukkurals" target="_blank" class="metadata-tree">\n        <div class="section">${h.section.tamil} – ${h.section.name}</div>\n        <div class="chapter">${h.chapter.tamil} – ${h.chapter.name}</div>\n      </a>\n    `,setTimeout((()=>{const o=e.getElementsByTagName("div"),a=Math.max(o[0].offsetWidth,o[1].offsetWidth);t.style.idth=`${a}px`,n.style.width=`${a}px`}),0)}catch(d){console.error("Error loading Thirukkural:",d),e.innerHTML="Failed to load Thirukkural",t.innerHTML="",n.innerHTML="",o.innerHTML="",a.innerHTML=""}}();
//# sourceMappingURL=content.js.map